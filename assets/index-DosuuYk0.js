(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const t of r)if(t.type==="childList")for(const o of t.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function c(r){const t={};return r.integrity&&(t.integrity=r.integrity),r.referrerPolicy&&(t.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?t.credentials="include":r.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function s(r){if(r.ep)return;r.ep=!0;const t=c(r);fetch(r.href,t)}})();const f=new Date,q=["./images/01.jpg","./images/02.jpg","./images/03.jpg","./images/04.jpg"],v=document.querySelector("#image"),L=document.querySelector("#hour"),$=document.querySelector("#dataText"),a=document.querySelector("#task"),C=document.querySelector(".list-task_label"),x=document.querySelector("#result_div"),d=document.querySelector(".error"),T=document.querySelector(".btn_removeAllTasck"),S=document.querySelector(".block-delete_div");function E(n){let e=f.getHours(),c=[];return e>=0&&e<6&&(c=n.slice(0,1)),e>=6&&e<12&&(c=n.slice(1,2)),e>=12&&e<18&&(c=n.slice(2,3)),e>=18&&e<0&&(c=n.slice(3,4)),c.join()}function w(){const n=new Date;let e=n.getHours(),c=n.getMinutes(),s=n.getSeconds();e<10&&(e="0"+e),c<10&&(c="0"+c),s<10&&(s="0"+s),L.innerHTML=e+":"+c+":"+s,setTimeout(w,1e3)}function D(){const n={day:"numeric",month:"long"};return f.toLocaleDateString("ru-Ru",n)}function M(){const n={weekday:"long"};return f.toLocaleDateString("ru-Ru",n)}const y="2aecb4465f352bc5a3a9145663c40cbd";document.querySelector("#coordinates");const j=document.querySelector("#My-coordinates_p");document.querySelector("#myCity-temp_li");const b="https://api.openweathermap.org/data/2.5/weather?units=metric&lang=en",H=document.querySelector("#block-myCity_div"),O=document.querySelector(".text-err_p"),A=document.querySelector(".text-err-myCity_p");function I(){v.style.backgroundImage=`url("${E(q)}")`,v.style.padding="1.25rem",setTimeout(w(),1e3);const n=document.createElement("p");$.appendChild(n),n.textContent=`${D()}, ${M()}`;const e=document.querySelector("#input");document.addEventListener("click",()=>{const t=e.value.trim();t!==""&&(c(t),localStorage.setItem("test",t))});async function c(t){try{const o=await fetch(`${b}&q=${t}&appid=${y}`);if(!o.ok)throw new Error("Ошибка запроса");const i=await o.json();return document.querySelector(".city").textContent=`Погода в городе ${i.name}`,document.querySelector(".temp").textContent=`Температура ${Math.round(i.main.temp)} градусов`,document.querySelector(".descript").textContent=`Облочность -  ${i.weather[0].description}`,[i.name,i.main.temp,i.weather[0].description]}catch(o){O.textContent=`${o}`}}async function s(t){try{const o=t.coords;H.style.display="block";let i=o.longitude,u=o.latitude;j.innerHTML=`Ваши координаты - долгота: ${~~(i*100)/100}, широта ${~~(u*100)/100}`;let l=`http://api.openweathermap.org/geo/1.0/reverse?lat=${u}&lon=${i}&limit=5&appid=${y}`;console.log(l);const g=await fetch(`${l}`);if(!g.ok)throw new Error("Ошибка запроса");const h=await g.json();let k=h.map(p=>p.name);console.log(k),document.querySelector(".myCity_li").textContent=`Ваш город -  ${h.map(p=>p.name)}`;const _=await fetch(`${b}&q=${k}&appid=${y}`);if(!_.ok)throw new Error("Ошибка запроса");const m=await _.json();return document.querySelector(".myCity-temp_li").textContent=`Температура ${Math.round(m.main.temp)} градусов`,document.querySelector(".myCity-descript_li").textContent=`Облочность- ${m.weather[0].description}`,[m.name]}catch(o){A.textContent=`${o}`}}window.addEventListener("load",r);function r(){navigator.geolocation?navigator.geolocation.getCurrentPosition(s):alert("Пожалуйста, включите геолокацию на вашем устройстве")}}document.addEventListener("DOMContentLoaded",I);a.addEventListener("keydown",n=>{if(n.keyCode===13)if(a.value===""){a.style.border="2px solid red";let e="<span>Ошибка: пустое поле</span>";d.innerHTML=e,d.style.display="block",d.style.color="red"}else{a.style.border="2px solid black",d.style.display="none";let e=document.createElement("div");C.after(e),x.insertAdjacentElement("afterbegin",e),e.classList.add("block-tasck_div");let c=`<input type="checkbox" name="list_tasck" id="list_tasck" />
<p class='list-task_p__line'>${a.value}</p>
<button class="btn_remove">Удалить</button>
  `;e.insertAdjacentHTML("afterbegin",c),[...document.querySelector(".block-tasck_div").children].forEach(function(t){t.tagName==="INPUT"&&(t.onclick=function(){let o=!1,i=t.nextElementSibling;if(i.classList.contains("list-task_p__decoration"))i.classList.remove("list-task_p__decoration");else if(i.classList.add("list-task_p__decoration"),o=!o,o===!0){let l=`<p class='text_p__decoration'>${document.querySelector(".list-task_p__decoration").innerHTML}</p>`;S.insertAdjacentHTML("beforeend",l)}}),t.tagName==="BUTTON"&&t.addEventListener("click",o=>{o.preventDefault(),document.querySelector(".block-tasck_div").remove()})}),T.addEventListener("click",t=>{t.preventDefault(),S.remove()})}});
